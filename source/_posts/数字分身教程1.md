title: 🚀 保姆级教程：用 RTX 5090 + SDXL 打造你的“迪士尼风格”数字分身 date: 2025-12-20 tags: [AI绘画, Stable Diffusion, ComfyUI, LoRA, 实战教程] excerpt: 只有显卡不会用？本文手把手教你利用 AutoDL 高算力，从零开始训练个人专属 LoRA 模型，并配合 ComfyUI 双 LoRA 串联工作流，完美复刻皮克斯/迪士尼风格的 3D 数字分身。代码可复制，逻辑通俗易懂，亲测跑通！
手里握着 RTX 5090/4090 这种核弹级算力，却只用来跑别人的模型？太浪费了！

今天，我们将从零开始，带你完成一次 “数字飞升” ：用你自己的照片，训练一个专属的 AI 模型（LoRA），然后在 ComfyUI 中把它变成《冰雪奇缘》或皮克斯电影里的 3D 主角。

这不只是一篇教程，更是一套标准的 AI 角色定制化工作流 (SOP)。无论你是想做盲盒 IP，还是做虚拟主播，这套流程通吃。

🛠️ 第一阶段：环境部署 (修桥铺路)
工欲善其事，必先利其器。如果你使用的是 AutoDL 等国内云服务器，第一步必须打通网络任督二脉，并解决新显卡的兼容性问题。

1. 搞定网络与依赖
打开你的终端 (Terminal)，执行以下“一键加速”组合拳：

# 1. 开启学术加速 (HuggingFace 国内镜像)
# 这一步是国内服务器下载模型不卡顿的关键
export HF_ENDPOINT=[https://hf-mirror.com](https://hf-mirror.com)

# 2. 解决 RTX 50 系列显卡的“富贵病”
# 新架构显卡常与旧版 Numpy/Torch 冲突，我们强制锁定版本
pip install "numpy<2.0.0" 
pip install torchvision --no-deps --upgrade

# 3. 安装训练神器 Kohya_ss
cd /root/autodl-tmp
git clone [https://github.com/kohya-ss/sd-scripts.git](https://github.com/kohya-ss/sd-scripts.git)
cd sd-scripts
pip install -r requirements.txt -i [https://pypi.tuna.tsinghua.edu.cn/simple](https://pypi.tuna.tsinghua.edu.cn/simple)
2. 下载 SDXL 底模
​不管是训练还是生图，我们都需要一个扎实的地基。这里推荐官方的 SDXL 1.0 Base。

huggingface-cli download stabilityai/stable-diffusion-xl-base-1.0 sd_xl_base_1.0.safetensors \
    --local-dir /root/autodl-tmp/sd-models \
    --local-dir-use-symlinks False
📸 第二阶段：数据工程 (炼丹原材料)
AI 是很聪明的，但前提是你给它的数据得干净。
​准备照片： 挑选 20-30 张你的半身照/大头照。
​要： 表情自然、光线充足、多角度。
​不要： 即使是“神图”但画质模糊、脸部被遮挡。
​上传路径： 将照片上传到 /root/autodl-tmp/train_data/10_my_face。
​注意：10_ 代表每张图训练 10 次，这是经验值。
​清洗标签 (关键！)：
​使用打标工具生成 .txt 描述文件后，务必手动检查。
​删掉：描述你具体衣服的词（如 white shirt），除非你想半永久焊死这件衣服。
​删掉：乱码词（如 arafed）。
​保留：glasses（如果你必须戴眼镜）、smiling（如果这是你的标志性表情）。
​🔥 第三阶段：开始训练 (注入灵魂)
针对高端显卡（RTX 4090/5090），我们放弃老旧的 xformers，拥抱更快的 BF16 和 SDPA 加速。

​1. 编写配置文件​在 sd-scripts 目录下新建 config.toml，填入以下“特调配方”：

[model_arguments]
pretrained_model_name_or_path = "/root/autodl-tmp/sd-models/sd_xl_base_1.0.safetensors"

[additional_network_arguments]
network_module = "networks.lora"
network_dim = 128             # 高纬度，捕捉微表情
network_alpha = 128
network_train_unet_only = true

[training_arguments]
output_dir = "/root/autodl-tmp/output"
output_name = "my_face_v1"
save_precision = "bf16"       # 5090/4090 专属加速精度
mixed_precision = "bf16"
max_train_epochs = 15         # 15轮足以
train_batch_size = 4
xformers = false              # 显卡太新，关掉它
sdpa = true                   # 开启 PyTorch 原生加速
一键启动
accelerate launch --num_cpu_threads_per_process=8 --mixed_precision="bf16" "./sdxl_train_network.py" \
    --config_file="./config.toml" \
    --dataset_config="./dataset.toml"
稍等 15 分钟，直到看到 model saved。恭喜，你的灵魂已经被刻录进 .safetensors 文件了！

​🎨 第四阶段：ComfyUI 工作流 (魔法合成)
​现在模型练好了，我们不需要跨服务器折腾，直接在同一台机器上启动 ComfyUI 进行推理。

​1. 模型归位

​把刚才练好的丹，放到 ComfyUI 能找到的地方：

mv /root/autodl-tmp/output/my_face_v1.safetensors /root/autodl-tmp/ComfyUI/models/loras/
下载风格滤镜 (Style LoRA)​为了达到极致的迪士尼效果，我们需要一个“风格滤镜”来配合你的“面部模型”。
# 下载 3D Render Style (业界公认最强 3D 风格)
huggingface-cli download goofyai/3d_render_style_xl \
    --local-dir /root/autodl-tmp/ComfyUI/models/loras/ \
    --local-dir-use-symlinks False
搭建“双 LoRA 串联”工作流 (核心秘籍)​不要简单地加载模型，要像 “穿糖葫芦” 一样串联节点：
​底模 (Checkpoint):推荐使用 DreamShaper XL Turbo（比官方底模更懂艺术）。
第一站 (Style LoRA): 加载 3d_render_style_xl。
​权重：0.8 ~ 1.0。
​潜台词： “先把整个画风变成 3D 迪士尼世界！”
​第二站 (Face LoRA): 加载 my_face_v1 (你的模型)。
​权重：0.45 ~ 0.55 (重点！)。
​潜台词： “保留我的骨相特征，但去掉真人皮肤的油腻感，服从上面的 3D 画风。”
​采样器 (KSampler): 步数 6-8 (Turbo模式)，CFG 1.5-2.0。​4. 提示词 (Prompt)
​正向： (Disney 3D style:1.4), (frozen style:1.2), qt_frozen man, male focus, smiling, suit...
​负向： (photorealistic:1.5), realism, skin texture (严防死守写实感)。
​🏆 总结
​这一套 “DreamShaper底模 + 强Style LoRA + 弱Face LoRA” 的组合拳，是目前生成风格化数字分身的最优解。​为什么要降权？ 因为你的模型是真人照片练的，权重太高会带入“真人感”，破坏“卡通感”。​为什么要串联？ 串联能让模型先学会画风，再学会长相，逻辑更顺畅。​现在，去点击那个 Queue Prompt 按钮吧，见证你在元宇宙里的第一次亮相！